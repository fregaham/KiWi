<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
		    	xmlns:rich="http://richfaces.org/rich"
		    	xmlns:a="http://richfaces.org/a4j"
	            xmlns:p="http://primefaces.prime.com.tr/ui" 
	            xmlns:c="http://java.sun.com/jstl/core"
    			xmlns:kiwi="http://www.kiwi-project.eu/jsf">
	<p:tab title="Sun Tags">


	<script type="text/javascript" src="/KiWi/view/widgets/sun/common/js/jquery.template.js"></script> 
    <script type="text/javascript" src="/KiWi/view/widgets/sun/common/js/jquery.overlay-min.js"></script>
	<script type="text/javascript" src="/KiWi/view/widgets/sun/common/js/jquery.json-2.2.min.js"></script>	
	<link rel="stylesheet" type="text/css" href="/KiWi/view/widgets/sun/tags_editor/css/suggester.css" />
	<link rel="stylesheet" type="text/css" href="/KiWi/view/widgets/sun/tags_editor/css/tags_editor.css" />

	<div>
            <div id="sun_tag_editor_inlineTags" class="suntagEditor_inlineTags"></div>
            <button id="sun_tag_editor_button" rel="#sun_tag_editor_overlay">Edit</button>
            <div id="sun_tag_editor_overlay" class="overlay"/> 
 
            <script type="text/javascript" src="/KiWi/view/widgets/sun/tags_editor/js/jquery.tags_editor.js"></script> 
            <script type="text/javascript" src="/KiWi/view/widgets/sun/tags_editor/js/tags_editor_templates.js"></script> 
 
            <script type="text/javascript" src="/KiWi/view/widgets/sun/tags_editor/js/jquery.suggester.js"></script>
 
            <script type="text/javascript"> 
			 //<![CDATA[
 
                var tagsEditor = null;
		jQuery.noConflict();
		jQuery(document).ready(function(){
                    (function($){

                        //$("#sun_tag_editor_overlay").append("<div id=\"sun_tag_editor_overlay_content\"></div>");
                        var resourceURI = "#{currentContentItem.resource.uri}";
                        
                        tagsEditor = new $.TagsEditor(null,/*#sun_tag_editor_overlay_content",*/ $("#sun_tag_editor_inlineTags"), resourceURI);

                        // Tell the widget not to send actual add/remove requests
                        tagsEditor.testAddRemove = false;
                        tagsEditor.deploy();
                        tagsEditor.attach($("#sun_tag_editor_overlay"));

                        $("#sun_tag_editor_button").overlay({
				onBeforeLoad:function(){
                                    
				},
				onClose:function(){                                        
                                    //$("#sun_tag_editor_overlay_content").remove();
                                    tagsEditor.hideRecommendedTags();
				},
				expose: {
					color: '#BAD0DB',
					opacity: 0.7,
					closeSpeed: 1000
				},
				finish: {
					top: 100,
					left: 'center',
					absolute: false
				},
				closeOnEsc : false
			});
                    })(jQuery);
                });
             //]]>    
            </script> 
        </div> 

                      
	</p:tab>
</ui:composition>
